<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Tour;
use App\Models\TourImage;
use App\Models\Agency;
use App\Models\Category;
use Illuminate\Support\Str;

class ToursSeeder extends Seeder
{
    public function run(): void
    {
        $this->command->info('ğŸ¯ Creando tours...');

        $agencies = Agency::all();
        $categories = Category::all();

        $tours = [
            // ========== INCA ADVENTURES (Cusco) ==========
            [
                'agency_id' => $agencies[0]->id,
                'category_id' => $categories->where('name', 'Aventura')->first()->id,
                'title' => 'Camino Inca ClÃ¡sico 4 DÃ­as a Machu Picchu',
                'description' => 'Experimenta la legendaria ruta del Camino Inca hacia Machu Picchu. Un viaje de 4 dÃ­as atravesando paisajes andinos impresionantes, sitios arqueolÃ³gicos incas y culminando con el amanecer en la ciudadela perdida de los Incas.',
                'itinerary' => "DÃ­a 1: Cusco - Km 82 - Wayllabamba (12km)\nSalida temprano desde Cusco. Inicio de caminata en el km 82. Almuerzo en ruta. Campamento en Wayllabamba (3,000 msnm).\n\nDÃ­a 2: Wayllabamba - Paso WarmihuaÃ±usca - Pacaymayo (11km)\nDÃ­a mÃ¡s desafiante. Ascenso al paso WarmihuaÃ±usca (4,215 msnm). Descenso a Pacaymayo. Vistas espectaculares.\n\nDÃ­a 3: Pacaymayo - WiÃ±ay Wayna (16km)\nVisita a ruinas de Runkurakay y Sayacmarca. Paso por tÃºnel inca. Campamento en WiÃ±ay Wayna con vista a las ruinas.\n\nDÃ­a 4: WiÃ±ay Wayna - Machu Picchu - Cusco\nSalida a las 4am hacia Inti Punku (Puerta del Sol). Amanecer en Machu Picchu. Tour guiado de 2 horas. Retorno a Cusco.",
                'includes' => "â€¢ GuÃ­a profesional bilingÃ¼e certificado\nâ€¢ Entrada a Machu Picchu\nâ€¢ Transporte Cusco - Km 82\nâ€¢ Tren Aguas Calientes - Ollantaytambo\nâ€¢ Bus Aguas Calientes - Machu Picchu\nâ€¢ 3 noches de camping con carpas profesionales\nâ€¢ Todas las comidas (3 desayunos, 3 almuerzos, 3 cenas)\nâ€¢ Snacks y agua durante el trek\nâ€¢ Porteadores para equipaje comÃºn\nâ€¢ BotiquÃ­n de primeros auxilios\nâ€¢ OxÃ­geno de emergencia",
                'excludes' => "â€¢ Propinas para guÃ­as y porteadores\nâ€¢ Bebidas alcohÃ³licas\nâ€¢ Seguro de viaje personal\nâ€¢ Porteador personal (disponible por USD 80)\nâ€¢ Bastones de trekking (alquiler USD 15)\nâ€¢ Entrada a Huayna Picchu (USD 75 adicional)\nâ€¢ Sleeping bag (alquiler USD 20)",
                'requirements' => "â€¢ Buen estado fÃ­sico (caminatas de 6-8 horas diarias)\nâ€¢ Pasaporte vigente\nâ€¢ Reservar con 6 meses de anticipaciÃ³n\nâ€¢ AclimataciÃ³n de 2-3 dÃ­as en Cusco\nâ€¢ Edad mÃ­nima: 12 aÃ±os\nâ€¢ Vacuna contra fiebre amarilla (recomendada)",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 30 dÃ­as antes. Entre 30-15 dÃ­as: 50% de reembolso. Menos de 15 dÃ­as: sin reembolso.",
                'refund_policy' => 'partial',
                'cancellation_hours' => 720,
                'price' => 650.00,
                'discount_price' => 580.00,
                'duration_days' => 4,
                'duration_hours' => 0,
                'max_people' => 16,
                'min_people' => 2,
                'difficulty_level' => 'hard',
                'location_city' => 'Cusco',
                'location_region' => 'Cusco',
                'location_country' => 'Peru',
                'latitude' => -13.163141,
                'longitude' => -72.545128,
                'featured_image' => 'https://images.unsplash.com/photo-1587595431973-160d0d94add1',
                'rating' => 4.9,
                'total_reviews' => 12,
                'total_bookings' => 8,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1587595431973-160d0d94add1',
                    'https://images.unsplash.com/photo-1526392060635-9d6019884377',
                    'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
                    'https://images.unsplash.com/photo-1580619305218-8423a7ef79b4',
                ],
            ],
            [
                'agency_id' => $agencies[0]->id,
                'category_id' => $categories->where('name', 'Cultural')->first()->id,
                'title' => 'City Tour Cusco y Ruinas Cercanas',
                'description' => 'Descubre la capital del Imperio Inca en medio dÃ­a. Visita la Catedral, Qoricancha, SacsayhuamÃ¡n, Q\'enqo, Puca Pucara y Tambomachay. Perfecto para tu primer dÃ­a en Cusco.',
                'itinerary' => "13:00 - Recojo del hotel\n13:30 - Catedral de Cusco y Plaza de Armas\n14:30 - Qoricancha (Templo del Sol)\n15:30 - SacsayhuamÃ¡n (Fortaleza ceremonial)\n16:30 - Q'enqo (Centro ceremonial)\n17:00 - Puca Pucara (Fortaleza militar)\n17:30 - Tambomachay (BaÃ±os del Inca)\n18:30 - Retorno al hotel",
                'includes' => "â€¢ Transporte turÃ­stico compartido\nâ€¢ GuÃ­a profesional espaÃ±ol/inglÃ©s\nâ€¢ Boleto TurÃ­stico (vÃ¡lido 10 dÃ­as)\nâ€¢ Entrada a la Catedral\nâ€¢ Recojo y retorno al hotel",
                'excludes' => "â€¢ Almuerzo\nâ€¢ Propinas\nâ€¢ Gastos personales",
                'requirements' => "â€¢ No requiere aclimataciÃ³n previa\nâ€¢ Calzado cÃ³modo\nâ€¢ Protector solar y gorra\nâ€¢ CÃ¡mara fotogrÃ¡fica",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 24 horas antes. Menos de 24h: sin reembolso.",
                'refund_policy' => 'partial',
                'cancellation_hours' => 24,
                'price' => 45.00,
                'discount_price' => 35.00,
                'duration_days' => 0,
                'duration_hours' => 5,
                'max_people' => 20,
                'min_people' => 2,
                'difficulty_level' => 'easy',
                'location_city' => 'Cusco',
                'location_region' => 'Cusco',
                'location_country' => 'Peru',
                'latitude' => -13.531950,
                'longitude' => -71.967463,
                'featured_image' => 'https://images.unsplash.com/photo-1526392060635-9d6019884377',
                'rating' => 4.7,
                'total_reviews' => 8,
                'total_bookings' => 15,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1526392060635-9d6019884377',
                    'https://images.unsplash.com/photo-1580619305218-8423a7ef79b4',
                    'https://images.unsplash.com/photo-1587595431973-160d0d94add1',
                ],
            ],
            [
                'agency_id' => $agencies[0]->id,
                'category_id' => $categories->where('name', 'Trekking')->first()->id,
                'title' => 'MontaÃ±a de 7 Colores (Vinicunca) - Full Day',
                'description' => 'Visita una de las maravillas naturales mÃ¡s impresionantes del PerÃº. La montaÃ±a de colores Vinicunca ofrece paisajes Ãºnicos a 5,200 msnm. Una experiencia inolvidable para amantes del trekking.',
                'itinerary' => "04:00 - Recojo del hotel en Cusco\n06:30 - Desayuno en Cusipata\n08:00 - Inicio de caminata (2 horas)\n10:00 - Llegada a Vinicunca (5,200 msnm)\n10:30 - Tiempo libre para fotos\n12:00 - Descenso\n14:00 - Almuerzo buffet\n17:00 - Retorno a Cusco\n19:00 - Llegada a Cusco",
                'includes' => "â€¢ Transporte turÃ­stico ida y vuelta\nâ€¢ GuÃ­a profesional\nâ€¢ Desayuno y almuerzo buffet\nâ€¢ Entrada a Vinicunca\nâ€¢ Bastones de trekking\nâ€¢ BotiquÃ­n y oxÃ­geno",
                'excludes' => "â€¢ Caballos (opcional S/ 80)\nâ€¢ Bebidas extras\nâ€¢ Propinas\nâ€¢ Desayuno del primer dÃ­a",
                'requirements' => "â€¢ Buena condiciÃ³n fÃ­sica\nâ€¢ AclimataciÃ³n de 2 dÃ­as en Cusco\nâ€¢ Ropa abrigadora\nâ€¢ Bloqueador solar\nâ€¢ Agua personal",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 48 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 48,
                'price' => 70.00,
                'discount_price' => 55.00,
                'duration_days' => 1,
                'duration_hours' => 0,
                'max_people' => 15,
                'min_people' => 2,
                'difficulty_level' => 'hard',
                'location_city' => 'Cusco',
                'location_region' => 'Cusco',
                'location_country' => 'Peru',
                'latitude' => -13.869167,
                'longitude' => -71.302778,
                'featured_image' => 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
                'rating' => 4.8,
                'total_reviews' => 10,
                'total_bookings' => 18,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
                    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e',
                    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4',
                ],
            ],

            // ========== PERU MÃGICO (Lima) ==========
            [
                'agency_id' => $agencies[1]->id,
                'category_id' => $categories->where('name', 'GastronomÃ­a')->first()->id,
                'title' => 'Tour GastronÃ³mico Lima - Mercado + Clase de Ceviche',
                'description' => 'SumÃ©rgete en la gastronomÃ­a peruana. Visita el mercado local, aprende a preparar ceviche autÃ©ntico y degusta los mejores sabores de Lima. Incluye pisco sour de bienvenida.',
                'itinerary' => "09:00 - Recojo en Miraflores/Barranco\n09:30 - Visita al mercado de Surquillo\n10:30 - Clase de cocina peruana\n11:00 - PreparaciÃ³n de ceviche clÃ¡sico\n12:00 - DegustaciÃ³n y almuerzo\n13:30 - Clase de Pisco Sour\n14:30 - Retorno al hotel",
                'includes' => "â€¢ Chef instructor profesional\nâ€¢ Ingredientes frescos del mercado\nâ€¢ Pisco sour de bienvenida\nâ€¢ Almuerzo completo con bebidas\nâ€¢ Recetario digital\nâ€¢ Certificado de participaciÃ³n\nâ€¢ Delantal y gorro de chef",
                'excludes' => "â€¢ Transporte (disponible por S/ 30)\nâ€¢ Propinas\nâ€¢ Bebidas alcohÃ³licas adicionales",
                'requirements' => "â€¢ No requiere experiencia culinaria\nâ€¢ Edad mÃ­nima: 18 aÃ±os para degustaciÃ³n de pisco\nâ€¢ Avisar alergias alimentarias",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 24 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 24,
                'price' => 95.00,
                'discount_price' => 75.00,
                'duration_days' => 0,
                'duration_hours' => 5,
                'max_people' => 12,
                'min_people' => 2,
                'difficulty_level' => 'easy',
                'location_city' => 'Lima',
                'location_region' => 'Lima',
                'location_country' => 'Peru',
                'latitude' => -12.046374,
                'longitude' => -77.042793,
                'featured_image' => 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1',
                'rating' => 4.9,
                'total_reviews' => 9,
                'total_bookings' => 12,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([2, 3, 4, 5, 6]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1555939594-58d7cb561ad1',
                    'https://images.unsplash.com/photo-1559847844-5315695dadae',
                    'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38',
                ],
            ],
            [
                'agency_id' => $agencies[1]->id,
                'category_id' => $categories->where('name', 'Cultural')->first()->id,
                'title' => 'Lima Colonial y Moderna - City Tour',
                'description' => 'Conoce el contraste entre la Lima colonial y la moderna. Visita el centro histÃ³rico (Patrimonio UNESCO), Miraflores, Parque del Amor y el Circuito MÃ¡gico del Agua.',
                'itinerary' => "14:00 - Recojo en hotel\n14:30 - Plaza Mayor y Catedral de Lima\n15:30 - Convento de San Francisco y Catacumbas\n16:30 - Parque del Amor en Miraflores\n17:00 - MalecÃ³n de Miraflores\n17:30 - Larcomar (tiempo libre)\n18:30 - Circuito MÃ¡gico del Agua\n20:00 - Retorno al hotel",
                'includes' => "â€¢ Transporte turÃ­stico\nâ€¢ GuÃ­a oficial bilingÃ¼e\nâ€¢ Entrada a San Francisco\nâ€¢ Entrada al Circuito MÃ¡gico del Agua\nâ€¢ Recojo y retorno al hotel",
                'excludes' => "â€¢ Alimentos y bebidas\nâ€¢ Propinas\nâ€¢ Gastos personales",
                'requirements' => "â€¢ Ropa cÃ³moda\nâ€¢ CÃ¡mara fotogrÃ¡fica\nâ€¢ Protector solar",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 24 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 24,
                'price' => 55.00,
                'discount_price' => null,
                'duration_days' => 0,
                'duration_hours' => 6,
                'max_people' => 18,
                'min_people' => 2,
                'difficulty_level' => 'easy',
                'location_city' => 'Lima',
                'location_region' => 'Lima',
                'location_country' => 'Peru',
                'latitude' => -12.046374,
                'longitude' => -77.042793,
                'featured_image' => 'https://images.unsplash.com/photo-1531968455001-5c5272a41129',
                'rating' => 4.6,
                'total_reviews' => 6,
                'total_bookings' => 10,
                'is_featured' => false,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1531968455001-5c5272a41129',
                    'https://images.unsplash.com/photo-1589394815804-964ed0be2eb5',
                    'https://images.unsplash.com/photo-1531572753322-ad063cecc140',
                ],
            ],

            // ========== AMAZONIA EXPEDITIONS (Iquitos) ==========
            [
                'agency_id' => $agencies[2]->id,
                'category_id' => $categories->where('name', 'Naturaleza')->first()->id,
                'title' => 'ExpediciÃ³n Amazonas 3 DÃ­as / 2 Noches - Lodge en la Selva',
                'description' => 'Vive la experiencia amazÃ³nica autÃ©ntica. Alojamiento en lodge ecolÃ³gico, navegaciÃ³n por el rÃ­o Amazonas, avistamiento de delfines rosados, caminatas nocturnas y convivencia con comunidades nativas.',
                'itinerary' => "DÃ­a 1: Iquitos - RÃ­o Amazonas - Lodge\n09:00 - Traslado al puerto\n10:00 - NavegaciÃ³n por el rÃ­o Amazonas (2h)\n12:00 - Llegada al lodge y almuerzo\n15:00 - Caminata de reconocimiento\n17:00 - Avistamiento de delfines rosados\n19:00 - Cena\n20:30 - Caminata nocturna\n\nDÃ­a 2: Selva Profunda\n06:00 - ObservaciÃ³n de aves al amanecer\n08:00 - Desayuno\n09:00 - Visita a comunidad nativa\n12:00 - Almuerzo\n15:00 - Pesca de piraÃ±as\n17:00 - Paseo en kayak\n19:00 - Cena\n20:00 - BÃºsqueda de caimanes\n\nDÃ­a 3: Retorno\n06:00 - Ãšltimo amanecer en la selva\n08:00 - Desayuno y check-out\n09:00 - NavegaciÃ³n de regreso\n11:00 - Llegada a Iquitos",
                'includes' => "â€¢ Transporte fluvial ida y vuelta\nâ€¢ 2 noches en lodge (habitaciÃ³n compartida)\nâ€¢ Todas las comidas (2 desayunos, 3 almuerzos, 2 cenas)\nâ€¢ GuÃ­a naturalista bilingÃ¼e\nâ€¢ Todas las excursiones mencionadas\nâ€¢ Botas de jungla\nâ€¢ Repelente de insectos\nâ€¢ Agua purificada\nâ€¢ BotiquÃ­n de primeros auxilios",
                'excludes' => "â€¢ Vuelos a Iquitos\nâ€¢ Bebidas alcohÃ³licas\nâ€¢ Propinas\nâ€¢ Seguro de viaje\nâ€¢ Upgrade a habitaciÃ³n privada (+$80)\nâ€¢ Souvenirs",
                'requirements' => "â€¢ Vacuna fiebre amarilla (obligatoria)\nâ€¢ Repelente de insectos personal\nâ€¢ Ropa ligera de manga larga\nâ€¢ Linterna frontal\nâ€¢ Binoculares (opcional)\nâ€¢ CÃ¡mara resistente al agua\nâ€¢ Medicamentos personales",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 7 dÃ­as antes. Entre 7-3 dÃ­as: 50% reembolso.",
                'refund_policy' => 'partial',
                'cancellation_hours' => 168,
                'price' => 385.00,
                'discount_price' => 320.00,
                'duration_days' => 3,
                'duration_hours' => 0,
                'max_people' => 12,
                'min_people' => 2,
                'difficulty_level' => 'medium',
                'location_city' => 'Iquitos',
                'location_region' => 'Loreto',
                'location_country' => 'Peru',
                'latitude' => -3.749912,
                'longitude' => -73.253479,
                'featured_image' => 'https://images.unsplash.com/photo-1516026672322-bc52d61a55d5',
                'rating' => 4.9,
                'total_reviews' => 11,
                'total_bookings' => 14,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 3, 5]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1516026672322-bc52d61a55d5',
                    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e',
                    'https://images.unsplash.com/photo-1559827260-dc66d52bef19',
                    'https://images.unsplash.com/photo-1518709268805-4e9042af9f23',
                ],
            ],
            [
                'agency_id' => $agencies[2]->id,
                'category_id' => $categories->where('name', 'Aventura')->first()->id,
                'title' => 'Canopy y Zipline en la Selva AmazÃ³nica',
                'description' => 'Vuela sobre la selva amazÃ³nica en el circuito de canopy mÃ¡s largo del PerÃº. 10 plataformas, 2.5km de recorrido y vistas espectaculares del dosel amazÃ³nico. Adrenalina pura en medio de la naturaleza.',
                'itinerary' => "08:00 - Recojo del hotel en Iquitos\n08:30 - Traslado al centro de canopy (45 min)\n09:30 - Charla de seguridad y equipamiento\n10:00 - Inicio del circuito de canopy\n12:00 - Almuerzo en la selva\n13:00 - Caminata de aventura\n14:30 - Regreso a Iquitos\n15:30 - Llegada al hotel",
                'includes' => "â€¢ Transporte ida y vuelta\nâ€¢ Equipo de seguridad completo\nâ€¢ GuÃ­a certificado\nâ€¢ Almuerzo tÃ­pico\nâ€¢ Agua y snacks\nâ€¢ Seguro de accidentes\nâ€¢ Fotos y videos del recorrido",
                'excludes' => "â€¢ Propinas\nâ€¢ Bebidas alcohÃ³licas\nâ€¢ Gastos personales",
                'requirements' => "â€¢ Edad: 10-65 aÃ±os\nâ€¢ Peso mÃ¡ximo: 120kg\nâ€¢ Buena salud general\nâ€¢ No apto para embarazadas\nâ€¢ No apto para problemas cardÃ­acos\nâ€¢ Ropa deportiva\nâ€¢ Calzado cerrado obligatorio",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 48 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 48,
                'price' => 120.00,
                'discount_price' => 95.00,
                'duration_days' => 0,
                'duration_hours' => 7,
                'max_people' => 10,
                'min_people' => 2,
                'difficulty_level' => 'medium',
                'location_city' => 'Iquitos',
                'location_region' => 'Loreto',
                'location_country' => 'Peru',
                'latitude' => -3.749912,
                'longitude' => -73.253479,
                'featured_image' => 'https://images.unsplash.com/photo-1551632811-561732d1e306',
                'rating' => 4.8,
                'total_reviews' => 7,
                'total_bookings' => 9,
                'is_featured' => false,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1551632811-561732d1e306',
                    'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
                    'https://images.unsplash.com/photo-1516026672322-bc52d61a55d5',
                ],
            ],

            // ========== MÃS TOURS DE DIFERENTES DESTINOS ==========
            [
                'agency_id' => $agencies[0]->id,
                'category_id' => $categories->where('name', 'Aventura')->first()->id,
                'title' => 'Rafting en el RÃ­o Urubamba - Nivel II-III',
                'description' => 'Adrenalina en los rÃ¡pidos del Valle Sagrado. Rafting clase II-III apto para principiantes y familias. Incluye entrenamiento, equipo completo y almuerzo. Paisajes espectaculares del Valle Sagrado.',
                'itinerary' => "08:00 - Recojo del hotel en Cusco\n09:30 - Llegada al rÃ­o Urubamba\n10:00 - Charla de seguridad y prÃ¡ctica\n10:30 - Inicio de rafting (2 horas)\n12:30 - Almuerzo tipo box lunch\n13:30 - Retorno a Cusco\n15:00 - Llegada a hotel",
                'includes' => "â€¢ Transporte ida y vuelta\nâ€¢ Equipo completo (traje, casco, chaleco, remos)\nâ€¢ GuÃ­a certificado\nâ€¢ Almuerzo\nâ€¢ Fotos y videos\nâ€¢ Seguro de accidentes",
                'excludes' => "â€¢ Ropa de cambio\nâ€¢ Toalla\nâ€¢ Propinas",
                'requirements' => "â€¢ Edad mÃ­nima: 12 aÃ±os\nâ€¢ Saber nadar\nâ€¢ Buena salud fÃ­sica\nâ€¢ No apto para embarazadas\nâ€¢ Ropa que pueda mojarse",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 24 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 24,
                'price' => 85.00,
                'discount_price' => 70.00,
                'duration_days' => 0,
                'duration_hours' => 7,
                'max_people' => 24,
                'min_people' => 4,
                'difficulty_level' => 'medium',
                'location_city' => 'Cusco',
                'location_region' => 'Cusco',
                'location_country' => 'Peru',
                'latitude' => -13.311093,
                'longitude' => -72.023964,
                'featured_image' => 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29',
                'rating' => 4.7,
                'total_reviews' => 5,
                'total_bookings' => 7,
                'is_featured' => false,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1501594907352-04cda38ebc29',
                    'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
                    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4',
                ],
            ],
            [
                'agency_id' => $agencies[1]->id,
                'category_id' => $categories->where('name', 'Playas')->first()->id,
                'title' => 'Paracas + Islas Ballestas - Full Day desde Lima',
                'description' => 'Conoce las "GalÃ¡pagos peruanas". NavegaciÃ³n a las Islas Ballestas, observaciÃ³n de lobos marinos, pingÃ¼inos de Humboldt y aves guaneras. Visita a la Reserva Nacional de Paracas y playas.',
                'itinerary' => "04:00 - Salida de Lima\n08:00 - Llegada a Paracas\n08:30 - Embarque a Islas Ballestas (2h)\n11:00 - Visita a la Reserva Nacional\n13:00 - Almuerzo frente al mar\n14:30 - Tiempo libre en playa\n16:00 - Retorno a Lima\n20:00 - Llegada a Lima",
                'includes' => "â€¢ Transporte turÃ­stico desde Lima\nâ€¢ GuÃ­a profesional\nâ€¢ Entrada a la Reserva\nâ€¢ Bote a Islas Ballestas\nâ€¢ Almuerzo\nâ€¢ Agua embotellada",
                'excludes' => "â€¢ Desayuno\nâ€¢ Propinas\nâ€¢ Gastos personales",
                'requirements' => "â€¢ Bloqueador solar\nâ€¢ Gorra y lentes de sol\nâ€¢ Ropa ligera\nâ€¢ CÃ¡mara fotogrÃ¡fica\nâ€¢ Efectivo para compras",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 48 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 48,
                'price' => 110.00,
                'discount_price' => 95.00,
                'duration_days' => 1,
                'duration_hours' => 0,
                'max_people' => 30,
                'min_people' => 4,
                'difficulty_level' => 'easy',
                'location_city' => 'Paracas',
                'location_region' => 'Ica',
                'location_country' => 'Peru',
                'latitude' => -13.843917,
                'longitude' => -76.250778,
                'featured_image' => 'https://images.unsplash.com/photo-1559827260-dc66d52bef19',
                'rating' => 4.6,
                'total_reviews' => 8,
                'total_bookings' => 11,
                'is_featured' => true,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5, 6, 0]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1559827260-dc66d52bef19',
                    'https://images.unsplash.com/photo-1583417319070-4a69db38a482',
                    'https://images.unsplash.com/photo-1505142468610-359e7d316be0',
                ],
            ],
            [
                'agency_id' => $agencies[0]->id,
                'category_id' => $categories->where('name', 'Familia')->first()->id,
                'title' => 'Valle Sagrado Completo con NiÃ±os - Tour Familiar',
                'description' => 'Tour familiar por el Valle Sagrado adaptado para niÃ±os. Visita Pisac, Ollantaytambo y Chinchero con actividades interactivas. Incluye almuerzo buffet y tiempo en mercados artesanales.',
                'itinerary' => "08:00 - Recojo del hotel\n09:30 - Mirador de Taray\n10:00 - Pisac: ruinas y mercado artesanal\n12:00 - Almuerzo buffet en Urubamba\n14:00 - Ollantaytambo: fortaleza inca\n16:00 - Chinchero: telares y alpacas\n18:00 - Retorno a Cusco",
                'includes' => "â€¢ Transporte privado familiar\nâ€¢ GuÃ­a especializado en familias\nâ€¢ Entradas a todos los sitios\nâ€¢ Almuerzo buffet con opciones para niÃ±os\nâ€¢ Snacks y agua\nâ€¢ Actividades interactivas\nâ€¢ Kit de actividades para niÃ±os",
                'excludes' => "â€¢ Souvenirs\nâ€¢ Propinas\nâ€¢ Bebidas extras",
                'requirements' => "â€¢ Apto para todas las edades\nâ€¢ Ritmo pausado y flexible\nâ€¢ Protector solar\nâ€¢ Ropa cÃ³moda\nâ€¢ Carriolas permitidas",
                'cancellation_policy' => "CancelaciÃ³n gratuita hasta 24 horas antes.",
                'refund_policy' => 'full',
                'cancellation_hours' => 24,
                'price' => 75.00,
                'discount_price' => 60.00,
                'duration_days' => 1,
                'duration_hours' => 0,
                'max_people' => 8,
                'min_people' => 2,
                'difficulty_level' => 'easy',
                'location_city' => 'Cusco',
                'location_region' => 'Cusco',
                'location_country' => 'Peru',
                'latitude' => -13.311093,
                'longitude' => -72.023964,
                'featured_image' => 'https://images.unsplash.com/photo-1511895426328-dc8714191300',
                'rating' => 4.8,
                'total_reviews' => 4,
                'total_bookings' => 6,
                'is_featured' => false,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 2, 3, 4, 5]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1511895426328-dc8714191300',
                    'https://images.unsplash.com/photo-1526392060635-9d6019884377',
                    'https://images.unsplash.com/photo-1580619305218-8423a7ef79b4',
                ],
            ],
            [
                'agency_id' => $agencies[2]->id,
                'category_id' => $categories->where('name', 'FotografÃ­a')->first()->id,
                'title' => 'Safari FotogrÃ¡fico en la AmazonÃ­a - 2 DÃ­as',
                'description' => 'Tour especializado para fotÃ³grafos de naturaleza. GuÃ­a fotogrÃ¡fico profesional, mejores horarios de luz, acceso a locaciones exclusivas. Captura la biodiversidad amazÃ³nica.',
                'itinerary' => "DÃ­a 1:\n05:00 - Salida para luz del amanecer\n06:30 - SesiÃ³n fotogrÃ¡fica de aves\n09:00 - Desayuno en lodge\n10:00 - Masterclass de fotografÃ­a macro\n14:00 - Golden hour en el rÃ­o\n19:00 - FotografÃ­a nocturna de fauna\n\nDÃ­a 2:\n05:00 - Amanecer en el dosel\n08:00 - Desayuno\n09:00 - Retratos de comunidad nativa\n12:00 - Check-out y retorno",
                'includes' => "â€¢ GuÃ­a fotogrÃ¡fico profesional\nâ€¢ 1 noche en lodge\nâ€¢ Todas las comidas\nâ€¢ Transporte fluvial\nâ€¢ Acceso a locaciones exclusivas\nâ€¢ Masterclass de fotografÃ­a\nâ€¢ RevisiÃ³n de portafolio",
                'excludes' => "â€¢ Equipo fotogrÃ¡fico\nâ€¢ Seguro de equipo\nâ€¢ Revelado digital",
                'requirements' => "â€¢ CÃ¡mara DSLR o mirrorless\nâ€¢ Lentes variados recomendados\nâ€¢ TrÃ­pode\nâ€¢ BaterÃ­as extra\nâ€¢ Tarjetas de memoria\nâ€¢ Bolsas impermeables",
                'cancellation_policy' => "CancelaciÃ³n hasta 5 dÃ­as antes: 80% reembolso.",
                'refund_policy' => 'partial',
                'cancellation_hours' => 120,
                'price' => 450.00,
                'discount_price' => 380.00,
                'duration_days' => 2,
                'duration_hours' => 0,
                'max_people' => 6,
                'min_people' => 2,
                'difficulty_level' => 'medium',
                'location_city' => 'Iquitos',
                'location_region' => 'Loreto',
                'location_country' => 'Peru',
                'latitude' => -3.749912,
                'longitude' => -73.253479,
                'featured_image' => 'https://images.unsplash.com/photo-1452587925148-ce544e77e70d',
                'rating' => 4.9,
                'total_reviews' => 3,
                'total_bookings' => 4,
                'is_featured' => false,
                'is_active' => true,
                'is_published' => true,
                'published_at' => now(),
                'creation_step' => 5,
                'admin_verified' => true,
                'admin_verified_at' => now(),
                'available_days' => json_encode([1, 4, 6]),
                'quality_checklist' => json_encode([
                    'has_title' => true,
                    'has_description' => true,
                    'has_itinerary' => true,
                    'has_price' => true,
                    'has_images' => true,
                    'min_images_met' => true,
                ]),
                'images' => [
                    'https://images.unsplash.com/photo-1452587925148-ce544e77e70d',
                    'https://images.unsplash.com/photo-1516026672322-bc52d61a55d5',
                    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e',
                ],
            ],
        ];

        foreach ($tours as $tourData) {
            $images = $tourData['images'];
            unset($tourData['images']);
            
            $tourData['slug'] = Str::slug($tourData['title']);
            $tour = Tour::create($tourData);

            foreach ($images as $index => $imageUrl) {
                TourImage::create([
                    'tour_id' => $tour->id,
                    'image_url' => $imageUrl,
                    'alt_text' => $tour->title,
                    'order' => $index + 1,
                    'is_primary' => $index === 0,
                ]);
            }
        }

        $this->command->info('âœ… Tours creados: ' . Tour::count());
        $this->command->info('âœ… ImÃ¡genes creadas: ' . TourImage::count());
    }
}